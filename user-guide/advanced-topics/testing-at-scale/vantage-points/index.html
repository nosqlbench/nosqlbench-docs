<!DOCTYPE html>
<html lang="en-US">
<head>
  <script src="https://docs.nosqlbench.io/theme.min.js" integrity="sha384-IpIaa84kOKgkF5EJ0fD/kBe2wtIIsIB60ANGmuJxeA0dz5bSRfwBwp2/QybtQpU2"></script>
  <link rel="stylesheet" href="https://docs.nosqlbench.io/abridge-switcher.css?h=4238d999f44a7bb130d5" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="preload" as="style" class="preStyle" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" crossorigin="anonymous" />
  <script defer src="https://docs.nosqlbench.io/search_index.en.js?h=ae47d253e455a3aaacb2" integrity="sha384-cP47owL9Iuak1e1AA21cJA4BgagQtaPwAXBQG7QgJeE2JKGgkCBROHbCj/Xym6KC"></script>
  <script defer src="https://docs.nosqlbench.io/abridge-bundle-nofacade.min.js?h=9bcf621a2fcab7336017" integrity="sha384-u8AROOUG6n2Xjk2+7pvkkfeSIqinjI1tmqeBpZRlZtc5KFO/8DyFfEir6fAE2wcq"></script>
  <meta name="base" content="https://docs.nosqlbench.io" />
<meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Vantage Points | NoSQLBench Project</title>
  <meta name="copyright" content="NoSQLBench Project" />
  <meta name="description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <link rel="canonical" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/" />
  <meta name="keywords" content="Abridge, Abridge.css, Zola, Theme, Zola Theme, getzola, Semantic Html, Fast, lightweight" />
  <meta property="og:url" content="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/" />
  <meta name="twitter:url" content="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/" />
  <meta property="og:description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <meta name="twitter:description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <meta property="og:title" content="Vantage Points | NoSQLBench Project" />
  <meta name="twitter:title" content="Vantage Points | NoSQLBench Project" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://docs.nosqlbench.io/nb5banner.png" />
  <meta property="og:image" content="https://docs.nosqlbench.io/nb5banner.png" />
  <meta property="og:site_name" content="NoSQLBench Project" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <meta name="msapplication-TileColor" content="#333333" />
  <link rel="manifest" href="https://docs.nosqlbench.io/site.webmanifest" />
  <link rel="mask-icon" href="https://docs.nosqlbench.io/safari-pinned-tab.svg" color="#ff9900" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://docs.nosqlbench.io/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://docs.nosqlbench.io/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://docs.nosqlbench.io/favicon-16x16.png" />
  <noscript><link rel="stylesheet" href="https://docs.nosqlbench.io/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://docs.nosqlbench.io/"><img src="https://docs.nosqlbench.io/nb5logo.png" alt="NoSQLBench5" width="32" height="32" />NoSQLBench v5</a></h1></div><div>
        <ul><li> <h2><a href="https://docs.nosqlbench.io/getting-started/">Getting Started</a></h2> </li><li> <h2><a href="https://docs.nosqlbench.io/release-notes/">Release Notes</a></h2> </li><li class="js"><i type="reset" id="mode" class="svgs adjust"></i></li></ul>
      </div>
      <div>
        <form autocomplete=off class="js" name="goSearch" id="searchbox">
          <div class="searchd">
            <input id="searchinput" type="text" placeholder="Search" title="Search" />
            <button type="submit" title="Search"><i class="svgs search"></i></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>

      <a href="http://github.com/nosqlbench/nosqlbench-build-docs" title="This doc site's project repo">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 22 18"
             fill="none"
             stroke="currentColor" stroke-width="1" stroke-linecap="round"
             stroke-linejoin="round">
          <path
              d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
      </a>
      <a href="http://nosqlbench.io" title="NoSQLBench Project Site">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 22 18"
             fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round"
             stroke-linejoin="round">
          <path
              d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
      </a>
    </nav>
    <hr /><div style="position:sticky"><span><a href="&#x2F;">NB5 Docsâ–º </a></span><span><a href="&#x2F;user-guide&#x2F;">User Guideâ–º </a></span><span><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;">Advanced Topicsâ–º </a></span><span title="A deeper dive into frequent topics of discussion around scale testing."><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;"><strong>Testing at Scaleâ–¼</strong> </a></span><span title="[current page]"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F;"><strong>Vantage Points ðŸ–º</strong></a></span>
</div></header>
  <main><!-- active_page: user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points.md -->
<!-- active_section: user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;_index.md -->


<!-- lower_root: user-guide&#x2F;advanced-topics&#x2F;_index.md -->
<!-- >upper_root: user-guide&#x2F;advanced-topics&#x2F;_index.md -->

<div class="toc" aria-hidden="true" id="">
<!--  <h4>Testing at Scale</h4>--><div class="toc-sticky"><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;binding-concepts&#x2F;">Binding Concepts</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;advanced-topics&#x2F;"title="detailed explanation of all available configuration methods in nb5">Advanced Topics</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;timing-terms&#x2F;">Timing Terms Explained</a></div><div class="toc-item"title="Detailed examples of different ways to configure nb5"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;configuration_techniques&#x2F;">â–ºConfiguration Techniques</a></div><div class="toc-item"title="NoSQLBench comes with a fully scriptable runtime for advanced testing scenarios"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;scenario-scripting&#x2F;">â–ºScenario Scripting</a></div><div class="toc-item"title="A deeper dive into frequent topics of discussion around scale testing."><strong>â–¼Testing at Scale</strong></div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F;">Scaling Math</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-up&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-up&#x2F;">Scaling Up</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;client-sizing&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;client-sizing&#x2F;">Client Sizing</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F;">Determinism &amp; Variation</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F;"><strong>Vantage Points</strong></a>
    </div></div>
</div>

<article>

  <p>A successful test of a system results in a set of measurements. However, there are many ways to take
measurements and they all serve to answer different questions. Where you take your measurements also
determines what you measure.</p>
<p>Consider the following diagram:</p>
<img src="../layers.svg" alt="drawing" width="75%"/>
<p>This diagram illustrates a prototypical set of services and their inner service dependencies. This
view only shows synchronous calls to keep the diagram simple.</p>
<h2 id="user-impact">User Impact</h2>
<p>The outer-most layer of the onion is what the user interacts with. In most modern services, this is
the browser. As well, most modern applications, there is an active client-side component which acts
as part of the composed application, with local page state being pseudo-persistent except for cache
controls and full reloads. This highlights how far designers will go to make interactions &quot;local&quot;
for users to avoid the cost of long request loops.</p>
<p>As such, the browser is subject to any response times included within the inner service layers.
Still, the browser represents the outer-most and thus most authentic vantage point from which to
measure user impact of service time. This is called the <em>User View</em> in the above diagram.</p>
<h2 id="looking-inward">Looking Inward</h2>
<p>Beyond the outer layer, you'll usually find more layers. In terms of what these layers are called: &quot;
endpoint&quot;, &quot;service&quot;, &quot;web app&quot;, &quot;app server&quot;, there is a ton of subjectivity. although the names
change, the underlying mechanisms are generally the same. The naming conventions come more from
local norms within a tech space or community of builders. One person's &quot;App Server&quot; is another's &quot;
RESTful endpoint&quot;. What is important to notice is how the layers form a cascade of dependencies down
to some physical device which is responsible for storing data. This pattern will be durable in nearly
every system you look at.</p>
<p>Between each layer is a type of messaging component. These are sometimes called &quot;media&quot;, or &quot;
transport&quot; in RFCs. Each connection between the layers carries with it a set of fundamental
trade-offs that, if understood, can establish reasonably durable minimum and maximum response times
in the realm of possibilities.</p>
<p>For example, a storage device that is using NVMe as the host bus will, all else being equal, perform
better than one service by a SATA channel. The specification for these &quot;transports&quot; say as much, but
more importantly, real-world results back this up.</p>
<p>Understanding of the connections between each layer of abstraction is essential. At least, knowing
the limits of technology at each layer, theoretical and practical is useful. Not to fear, a good
testing setup can help you find these limits in specific terms.</p>
<h2 id="service-time-math">Service Time Math</h2>
<p>There will be a limit to how much data you can collect, and from which vantage points you can get it
from. That means that sometimes you need to do some sleuthing with the data you have in order to
tease out important details.</p>
<p>For example, say you have a good set of metrics for the app server in the diagram above. You know
that the p95 service time is 121ms. Suppose you also know the p95 service time for <em>the same calls</em>
at the DB layer. That is 32ms. If you don't know <em>anything else</em> about the calls, you can at least
infer that the difference between these two layers is around 89ms (P95). That means that, for 5 out
of every 100 operations, somewhere between your web app, your db driver, and your db service, you
are spending at least 89ms doing <em>something</em>. This could be in the active processing, or in the
passive transport of data -- the ethernet layer or otherwise. At least you can set book-end
expectations between these layers.</p>
<h2 id="applied-principles">Applied Principles</h2>
<p><strong>outside-in</strong></p>
<p>Generally speaking, to understand how service times impact users, you generally want to measure from
outer vantage points. To understand why the user sees these service times, you look at the inner
layers.</p>
<p><strong>detailed enough</strong></p>
<p>When constructing layered views of your metrics, it is useful to add the elements you need and can
instrument for metrics first. The above diagram goes to a degree of detail that may be too much to
be useful in a practical analysis scenario. You could add placeholders to capture elements of the
transport and inter-connections, additional internal subsystems of layers, etc. This is only useful
if it helps tell an important story about the details of your system, i.e. details that you can use
to take action for an improvement or to help you focus effort in the right place.</p>
<p><strong>clear labeling</strong></p>
<p>When you are capturing metrics, make sure that the nesting and vantage points are very clear to
observers. A little detail in naming goes a long way to keeping operators honest with each other
about what is actually happening in the system.</p>
<p><strong>contextual views</strong></p>
<p>As you learn to build operational views of systems, be sure to tailor them to the user-impacting
services that your business is measured by. This starts on the outside of your system, and cuts
through critical paths, focusing on those areas which have the highest variability in responsiveness
or availability. It includes the details that need the most attention. You can't start from a rich
dashboard of data that includes the kitchen sink to arrive at this. It is an art form that you must
constantly practice in order to keep operational relevant. Yes, there will be long-standing themes
and objectives, but the more ephemeral factors need to be treated as such.</p>

<p><b><a href="#">Back to top</a></b></p>
</article>
<div class="toc" aria-hidden="true">
  <div class="toc-sticky">
    <h5>Vantage Points</h5>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/#user-impact">User Impact</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/#looking-inward">Looking Inward</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/#service-time-math">Service Time Math</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/vantage-points/#applied-principles">Applied Principles</a>
    </div>
  </div>
</div>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav>
        <ul></ul>
      </nav>
      <p class="s90">Copyright &copy; 2023-2023 NoSQLBench Project</p>
    </div>
  </footer>
</body>
</html>
