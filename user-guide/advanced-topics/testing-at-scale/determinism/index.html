<!DOCTYPE html>
<html lang="en-US">
<head>
  <script src="https://docs.nosqlbench.io/theme.min.js" integrity="sha384-IpIaa84kOKgkF5EJ0fD/kBe2wtIIsIB60ANGmuJxeA0dz5bSRfwBwp2/QybtQpU2"></script>
  <link rel="stylesheet" href="https://docs.nosqlbench.io/abridge-switcher.css?h=4238d999f44a7bb130d5" />
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <link rel="preload" as="style" class="preStyle" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" crossorigin="anonymous" />
  <script defer src="https://docs.nosqlbench.io/search_index.en.js?h=ae47d253e455a3aaacb2" integrity="sha384-cP47owL9Iuak1e1AA21cJA4BgagQtaPwAXBQG7QgJeE2JKGgkCBROHbCj/Xym6KC"></script>
  <script defer src="https://docs.nosqlbench.io/abridge-bundle-nofacade.min.js?h=9bcf621a2fcab7336017" integrity="sha384-u8AROOUG6n2Xjk2+7pvkkfeSIqinjI1tmqeBpZRlZtc5KFO/8DyFfEir6fAE2wcq"></script>
  <meta name="base" content="https://docs.nosqlbench.io" />
<meta name="robots" content="index, follow" />
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <title>Determinism & Variation | NoSQLBench Project</title>
  <meta name="copyright" content="NoSQLBench Project" />
  <meta name="description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <link rel="canonical" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/" />
  <meta name="keywords" content="Abridge, Abridge.css, Zola, Theme, Zola Theme, getzola, Semantic Html, Fast, lightweight" />
  <meta property="og:url" content="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/" />
  <meta name="twitter:url" content="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/" />
  <meta property="og:description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <meta name="twitter:description" content="NoSQLBench is an Open Source, Multi-Protocol, Pluggable, Scriptable, NoSQL (and more) Testing System." />
  <meta property="og:title" content="Determinism &amp; Variation | NoSQLBench Project" />
  <meta name="twitter:title" content="Determinism &amp; Variation | NoSQLBench Project" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://docs.nosqlbench.io/nb5banner.png" />
  <meta property="og:image" content="https://docs.nosqlbench.io/nb5banner.png" />
  <meta property="og:site_name" content="NoSQLBench Project" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:type" content="website" />
  <meta property="og:updated_time" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="theme-color" content="#333333" />
  <meta name="msapplication-TileColor" content="#333333" />
  <link rel="manifest" href="https://docs.nosqlbench.io/site.webmanifest" />
  <link rel="mask-icon" href="https://docs.nosqlbench.io/safari-pinned-tab.svg" color="#ff9900" />
  <link rel="apple-touch-icon" sizes="180x180" href="https://docs.nosqlbench.io/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://docs.nosqlbench.io/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://docs.nosqlbench.io/favicon-16x16.png" />
  <noscript><link rel="stylesheet" href="https://docs.nosqlbench.io/nojs.css" /></noscript>
</head>
<body>
  <header>
    <nav>
      <div><h1><a href="https://docs.nosqlbench.io/"><img src="https://docs.nosqlbench.io/nb5logo.png" alt="NoSQLBench5" width="32" height="32" />NoSQLBench v5</a></h1></div><div>
        <ul><li> <h2><a href="https://docs.nosqlbench.io/getting-started/">Getting Started</a></h2> </li><li> <h2><a href="https://docs.nosqlbench.io/release-notes/">Release Notes</a></h2> </li><li class="js"><i type="reset" id="mode" class="svgs adjust"></i></li></ul>
      </div>
      <div>
        <form autocomplete=off class="js" name="goSearch" id="searchbox">
          <div class="searchd">
            <input id="searchinput" type="text" placeholder="Search" title="Search" />
            <button type="submit" title="Search"><i class="svgs search"></i></button>
          </div>
          <div><div id="suggestions"></div></div>
        </form>
      </div>

      <a href="http://github.com/nosqlbench/nosqlbench-build-docs" title="This doc site's project repo">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 22 18"
             fill="none"
             stroke="currentColor" stroke-width="1" stroke-linecap="round"
             stroke-linejoin="round">
          <path
              d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
      </a>
      <a href="http://nosqlbench.io" title="NoSQLBench Project Site">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 22 18"
             fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round"
             stroke-linejoin="round">
          <path
              d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
        </svg>
      </a>
    </nav>
    <hr /><div style="position:sticky"><span><a href="&#x2F;">NB5 Docsâ–º </a></span><span><a href="&#x2F;user-guide&#x2F;">User Guideâ–º </a></span><span><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;">Advanced Topicsâ–º </a></span><span title="A deeper dive into frequent topics of discussion around scale testing."><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;"><strong>Testing at Scaleâ–¼</strong> </a></span><span title="[current page]"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F;"><strong>Determinism &amp; Variation ðŸ–º</strong></a></span>
</div></header>
  <main><!-- active_page: user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism.md -->
<!-- active_section: user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;_index.md -->


<!-- lower_root: user-guide&#x2F;advanced-topics&#x2F;_index.md -->
<!-- >upper_root: user-guide&#x2F;advanced-topics&#x2F;_index.md -->

<div class="toc" aria-hidden="true" id="">
<!--  <h4>Testing at Scale</h4>--><div class="toc-sticky"><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;binding-concepts&#x2F;">Binding Concepts</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;advanced-topics&#x2F;"title="detailed explanation of all available configuration methods in nb5">Advanced Topics</a></div><div class="toc-item"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;timing-terms&#x2F;">Timing Terms Explained</a></div><div class="toc-item"title="Detailed examples of different ways to configure nb5"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;configuration_techniques&#x2F;">â–ºConfiguration Techniques</a></div><div class="toc-item"title="NoSQLBench comes with a fully scriptable runtime for advanced testing scenarios"><a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;scenario-scripting&#x2F;">â–ºScenario Scripting</a></div><div class="toc-item"title="A deeper dive into frequent topics of discussion around scale testing."><strong>â–¼Testing at Scale</strong></div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-math&#x2F;">Scaling Math</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-up&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;scaling-up&#x2F;">Scaling Up</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;client-sizing&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;client-sizing&#x2F;">Client Sizing</a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;determinism&#x2F;"><strong>Determinism &amp; Variation</strong></a>
    </div><!-- subsection_page_path: &#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F; -->
    <div class="toc-item-child">
      <a href="&#x2F;user-guide&#x2F;advanced-topics&#x2F;testing-at-scale&#x2F;vantage-points&#x2F;">Vantage Points</a>
    </div></div>
</div>

<article>

  <p>This section touches on topics of using randomized data within NoSQLBench tests.</p>
<h2 id="benefits">Benefits</h2>
<p>The benefits of using procedural generation for the purposes of load testing is taken as granted in
this section. For a more thorough discussion on the merits, please see the showcase 
section for <a href="https://docs.nosqlbench.io/introduction/showcase/#virtual-data-set">Virtual DataSet</a></p>
<h2 id="basic-theory">Basic Theory</h2>
<p>In NoSQLBench, the data used for each operation is generated on the fly. However, the data is also
deterministic by default. That means, for a given activity, any numbered cycle will produce the same
operation from test to test, so long as the parameters are the same.</p>
<p>NoSQLBench runs each activity over a specific range of cycles. For each cycle, an operation is 
built from a template using that cycle as a seed. The cycle value determines which op template 
to use as well as all the payload values and/or configuration details for that operation.</p>
<p>The machinery which is responsible for dispatching operations to run is initialized before an 
activity starts to optimize performance while the activity is running.</p>
<h2 id="managing-variation">Managing Variation</h2>
<p>There are ways of selecting how much variation you have from one test scenario to another.</p>
<p>Sometimes you will want to run the same test with the same operations, access patterns, and data.
This may be necessary in advanced testing scenarios, since it can make data or order-specific 
problems reproducible. The ability to run the same test between different target systems is 
extremely valuable.</p>
<h3 id="selecting-cycles">Selecting Cycles</h3>
<p>You can cause an activity to run a different set of operations simply by changing the cycle range
used in the test.</p>
<p>For an activity that is configured with <code>cycles=100M</code>, 100 million independent cycles will be used.
These cycles will be automatically apportioned to the client threads as needed until they are all
used up.</p>
<p>If you want to run 100 million different cycles, all you have to do is specify a different set of
seeds. This is as simple as specifying <code>cycles=100M..200M</code>, as the first example above is only
short-hand for <code>cycles=0..100M</code>.</p>
<h3 id="selecting-bindings">Selecting Bindings</h3>
<p>The built-in workloads come with bindings which support the <em>rampup</em> and <em>main</em> testing activities
appropriately. This means that the cycles for rampup will use a binding that lays data into a
dataset incrementally, as you would build a log cabin. Each cycle adds to the data. The bindings are
chosen for this effect so that the rampup activity is incremental with the cycle value.</p>
<p>The main activity bindings are selected differently. In the main activity, you don't want to 
address over the data in order. To emulate a real workload, you need to select the data 
pseudo-randomly so that storage devices don't get to cheat with read-ahead (more than they 
would realistically) and so on. That means that the main activity bindings are also specifically 
chosen for the &quot;random&quot; access patterns that you might expect in some workloads.</p>
<p>The distinction between these two types of bindings should tell you something about the binding
capabilities. You can really do what ever you want as long as you can stitch the right functions
together to get there. Although the data produced by some functions (like <code>Hash()</code> for
example) look random, they are not. They are, however, effectively random enough for most 
distributed systems performance testing.</p>
<p>If you need to add randomization to fields, it doesn't hurt to add an additional <code>Hash()</code> to the
front. Just be advised that the same constructions from one bind point to the next will yield
the same outputs, so season to taste.</p>

<p><b><a href="#">Back to top</a></b></p>
</article>
<div class="toc" aria-hidden="true">
  <div class="toc-sticky">
    <h5>Determinism &amp; Variation</h5>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/#benefits">Benefits</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/#basic-theory">Basic Theory</a>
    </div>
    <div class="toc-item">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/#managing-variation">Managing Variation</a>
    </div>
    <div class="toc-item-child">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/#selecting-cycles"><small>- Selecting Cycles</small></a>
    </div>
    <div class="toc-item-child">
      <a class="subtext" href="https://docs.nosqlbench.io/user-guide/advanced-topics/testing-at-scale/determinism/#selecting-bindings"><small>- Selecting Bindings</small></a>
    </div>
  </div>
</div>
  </main>
  <footer>
    <hr />
    <div class="c">
      <nav>
        <ul></ul>
      </nav>
      <p class="s90">Copyright &copy; 2023-2023 NoSQLBench Project</p>
    </div>
  </footer>
</body>
</html>
